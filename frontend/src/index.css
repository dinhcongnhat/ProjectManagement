@import "tailwindcss";

/* ==================== Dark Mode CSS Variables ==================== */
:root {
  /* Light mode colors */
  --color-bg-primary: 249 250 251;
  /* gray-50 */
  --color-bg-secondary: 255 255 255;
  /* white */
  --color-bg-tertiary: 243 244 246;
  /* gray-100 */
  --color-bg-hover: 229 231 235;
  /* gray-200 */

  --color-text-primary: 17 24 39;
  /* gray-900 */
  --color-text-secondary: 75 85 99;
  /* gray-600 */
  --color-text-tertiary: 107 114 128;
  /* gray-500 */
  --color-text-muted: 156 163 175;
  /* gray-400 */

  --color-border-primary: 229 231 235;
  /* gray-200 */
  --color-border-secondary: 209 213 219;
  /* gray-300 */

  --color-accent-primary: 59 130 246;
  /* blue-500 */
  --color-accent-secondary: 37 99 235;
  /* blue-600 */
  --color-accent-hover: 29 78 216;
  /* blue-700 */
  --color-accent-light: 239 246 255;
  /* blue-50 */

  /* Card shadow for light mode */
  --shadow-card: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
  --shadow-dropdown: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
}

.dark {
  /* Dark mode colors */
  --color-bg-primary: 17 24 39;
  /* gray-900 */
  --color-bg-secondary: 31 41 55;
  /* gray-800 */
  --color-bg-tertiary: 55 65 81;
  /* gray-700 */
  --color-bg-hover: 75 85 99;
  /* gray-600 */

  --color-text-primary: 249 250 251;
  /* gray-50 */
  --color-text-secondary: 209 213 219;
  /* gray-300 */
  --color-text-tertiary: 156 163 175;
  /* gray-400 */
  --color-text-muted: 107 114 128;
  /* gray-500 */

  --color-border-primary: 55 65 81;
  /* gray-700 */
  --color-border-secondary: 75 85 99;
  /* gray-600 */

  --color-accent-primary: 96 165 250;
  /* blue-400 */
  --color-accent-secondary: 59 130 246;
  /* blue-500 */
  --color-accent-hover: 37 99 235;
  /* blue-600 */
  --color-accent-light: 30 58 138;
  /* blue-900 with opacity */

  /* Card shadow for dark mode */
  --shadow-card: 0 1px 3px 0 rgb(0 0 0 / 0.3), 0 1px 2px -1px rgb(0 0 0 / 0.3);
  --shadow-dropdown: 0 10px 15px -3px rgb(0 0 0 / 0.4), 0 4px 6px -4px rgb(0 0 0 / 0.4);
}

/* Base body styles - PWA standalone needs explicit background */
body {
  background-color: #f8fafc;
  min-height: 100vh;
  min-height: 100dvh;
}

#root {
  min-height: 100vh;
  min-height: 100dvh;
}

/* Dark mode base styles */
.dark body {
  @apply bg-gray-900 text-gray-50;
}

/* Dark mode common element overrides */
.dark .bg-white {
  @apply !bg-gray-800;
}

.dark .bg-gray-50 {
  @apply !bg-gray-900;
}

.dark .bg-gray-100 {
  @apply !bg-gray-800;
}

.dark .text-gray-900 {
  @apply !text-gray-50;
}

.dark .text-gray-800 {
  @apply !text-gray-100;
}

.dark .text-gray-700 {
  @apply !text-gray-200;
}

.dark .text-gray-600 {
  @apply !text-gray-300;
}

.dark .text-gray-500 {
  @apply !text-gray-400;
}

.dark .border-gray-200 {
  @apply !border-gray-700;
}

.dark .border-gray-300 {
  @apply !border-gray-600;
}

.dark .border {
  @apply !border-gray-700;
}

.dark .hover\:bg-gray-50:hover {
  @apply !bg-gray-700;
}

.dark .hover\:bg-gray-100:hover {
  @apply !bg-gray-700;
}

.dark .divide-gray-200> :not([hidden])~ :not([hidden]) {
  @apply !border-gray-700;
}

/* Dark mode for inputs */
.dark input,
.dark textarea,
.dark select {
  @apply !bg-gray-800 !text-gray-100 !border-gray-700;
}

.dark input::placeholder,
.dark textarea::placeholder {
  @apply !text-gray-500;
}

/* Dark mode for focus states */
.dark .focus\:ring-blue-500:focus {
  --tw-ring-color: rgb(96 165 250);
}

.dark .focus\:border-blue-500:focus {
  @apply !border-blue-400;
}

/* Dark mode shadow adjustments */
.dark .shadow-sm,
.dark .shadow,
.dark .shadow-md,
.dark .shadow-lg {
  box-shadow: var(--shadow-card);
}

/* Dark mode for modals and overlays */
.dark .bg-black\/50,
.dark .bg-black\/40 {
  @apply bg-black/70;
}

/* Dark mode scrollbar */
.dark ::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.dark ::-webkit-scrollbar-track {
  @apply bg-gray-800;
}

.dark ::-webkit-scrollbar-thumb {
  @apply bg-gray-600 rounded-full;
}

.dark ::-webkit-scrollbar-thumb:hover {
  @apply bg-gray-500;
}

/* ==================== Additional Dark Mode Overrides ==================== */

/* Gradient backgrounds for sidebar header */
.dark .bg-gradient-to-br.from-white,
.dark [class*="bg-gradient"][class*="from-white"] {
  background: linear-gradient(to bottom right, rgb(31 41 55), rgb(17 24 39)) !important;
}

.dark .from-white.to-blue-50\/30,
.dark [class*="from-white"][class*="to-blue-50"] {
  background: linear-gradient(to bottom right, rgb(31 41 55), rgb(30 58 138 / 0.3)) !important;
}

/* Sidebar header specifically - more specific selector */
.dark aside .p-3.border-b[class*="bg-gradient"],
.dark aside .p-4.border-b[class*="bg-gradient"],
.dark aside div[class*="bg-gradient-to-br"] {
  background: linear-gradient(to bottom right, rgb(31 41 55), rgb(30 58 138 / 0.2)) !important;
}

/* Border colors */
.dark .border-gray-100 {
  @apply !border-gray-700;
}

.dark .border-blue-100 {
  @apply !border-blue-900;
}

/* Background colors */
.dark .bg-blue-50 {
  @apply !bg-blue-900/30;
}

.dark .bg-blue-100 {
  @apply !bg-blue-800/50;
}

.dark .bg-red-50 {
  @apply !bg-red-900/30;
}

.dark .bg-red-100 {
  @apply !bg-red-900/50;
}

.dark .bg-green-50 {
  @apply !bg-green-900/30;
}

.dark .bg-green-100 {
  @apply !bg-green-900/50;
}

.dark .bg-yellow-50 {
  @apply !bg-yellow-900/30;
}

.dark .bg-yellow-100 {
  @apply !bg-yellow-900/50;
}

.dark .bg-purple-50 {
  @apply !bg-purple-900/30;
}

.dark .bg-orange-50 {
  @apply !bg-orange-900/30;
}

.dark .bg-indigo-50 {
  @apply !bg-indigo-900/30;
}

/* Text colors */
.dark .text-blue-700 {
  @apply !text-blue-400;
}

.dark .text-blue-600 {
  @apply !text-blue-400;
}

.dark .text-red-600 {
  @apply !text-red-400;
}

.dark .text-red-700 {
  @apply !text-red-400;
}

.dark .text-green-600 {
  @apply !text-green-400;
}

.dark .text-green-700 {
  @apply !text-green-400;
}

.dark .text-yellow-600 {
  @apply !text-yellow-400;
}

.dark .text-purple-600 {
  @apply !text-purple-400;
}

.dark .text-orange-600 {
  @apply !text-orange-400;
}

.dark .text-gray-400 {
  @apply !text-gray-500;
}

/* Hover states */
.dark .hover\:bg-gray-200:hover {
  @apply !bg-gray-600;
}

.dark .hover\:bg-white:hover {
  @apply !bg-gray-700;
}

.dark .hover\:bg-red-50:hover {
  @apply !bg-red-900/30;
}

.dark .hover\:bg-blue-50:hover {
  @apply !bg-blue-900/30;
}

.dark .hover\:text-blue-600:hover {
  @apply !text-blue-400;
}

.dark .hover\:text-red-600:hover {
  @apply !text-red-400;
}

.dark .hover\:border-gray-200:hover {
  @apply !border-gray-600;
}

.dark .hover\:border-gray-300:hover {
  @apply !border-gray-500;
}

/* Group hover states */
.dark .group-hover\:bg-gray-200 {
  background-color: rgb(75 85 99) !important;
}

.dark .group-hover\:bg-red-100 {
  background-color: rgb(127 29 29 / 0.5) !important;
}

.dark .group-hover\:text-gray-700 {
  color: rgb(229 231 235) !important;
}

.dark .group-hover\:text-red-500 {
  color: rgb(248 113 113) !important;
}

/* Active/Selected states */
.dark .bg-blue-600 {
  @apply !bg-blue-500;
}

.dark .text-white {
  color: white !important;
}

/* Cards and containers */
.dark .rounded-xl.border.shadow-sm {
  @apply !bg-gray-800 !border-gray-700;
}

/* Chat popup specific */
.dark .bg-white.shadow-lg,
.dark .bg-white.shadow-xl {
  @apply !bg-gray-800;
}

/* Backdrop blur */
.dark .bg-white\/80 {
  background-color: rgb(31 41 55 / 0.8) !important;
}

.dark .backdrop-blur-sm {
  backdrop-filter: blur(4px);
}

/* Ring colors */
.dark .ring-gray-200 {
  --tw-ring-color: rgb(55 65 81) !important;
}

.dark .ring-gray-100 {
  --tw-ring-color: rgb(55 65 81) !important;
}

/* Focus visible states */
.dark .focus-visible\:ring-blue-500:focus-visible {
  --tw-ring-color: rgb(96 165 250) !important;
}

/* Placeholder text */
.dark .placeholder-gray-400::placeholder {
  color: rgb(107 114 128) !important;
}

.dark .placeholder-gray-500::placeholder {
  color: rgb(156 163 175) !important;
}

/* Logo area special treatment - warm gradient for dark mode slogan */
.dark .bg-gradient-to-r.from-blue-600.via-purple-600.to-blue-600,
.dark .bg-gradient-to-r.from-purple-600.via-blue-600.to-purple-600,
.dark [class*="bg-gradient-to-r"][class*="from-blue-600"][class*="via-purple-600"],
.dark [class*="bg-gradient-to-r"][class*="from-purple-600"][class*="via-blue-600"] {
  background: linear-gradient(to right, rgb(251 146 60), rgb(236 72 153), rgb(251 146 60)) !important;
  background-size: 200% auto !important;
  -webkit-background-clip: text !important;
  background-clip: text !important;
}

/* Notification badge */
.dark .bg-red-500 {
  background-color: rgb(239 68 68) !important;
}

/* Progress bars and accents */
.dark .bg-blue-500 {
  background-color: rgb(59 130 246) !important;
}

.dark .bg-green-500 {
  background-color: rgb(34 197 94) !important;
}

/* Dividers */
.dark .divide-gray-100> :not([hidden])~ :not([hidden]) {
  @apply !border-gray-700;
}

/* Tables */
.dark th {
  @apply !bg-gray-800 !text-gray-200 !border-gray-700;
}

.dark td {
  @apply !border-gray-700;
}

.dark tr:hover {
  @apply !bg-gray-700/50;
}

/* Dropdown menus */
.dark [role="menu"],
.dark [role="listbox"] {
  @apply !bg-gray-800 !border-gray-700;
}

.dark [role="menuitem"]:hover,
.dark [role="option"]:hover {
  @apply !bg-gray-700;
}

/* Modal dialogs */
.dark [role="dialog"] {
  @apply !bg-gray-800;
}

/* Tooltips */
.dark [role="tooltip"] {
  @apply !bg-gray-700 !text-gray-100;
}

/* Tabs */
.dark .border-b-2.border-blue-600 {
  @apply !border-blue-400;
}

/* ==================== Inline Style Overrides for ChatPopup ==================== */
/* Since ChatPopup uses inline styles, we need to use more specific selectors */
.dark [style*="backgroundColor: 'white'"],
.dark [style*="backgroundColor: white"],
.dark [style*="background-color: white"],
.dark [style*='backgroundColor: "white"'] {
  background-color: rgb(31 41 55) !important;
}

/* Fix for portalled modals and popups */
.dark div[style*="background"][style*="white"] {
  background-color: rgb(31 41 55) !important;
}

/* Chat popup panel - target by structure */
.dark div[style*="zIndex: 9999"] {
  background-color: rgb(31 41 55) !important;
}

/* Modals with fixed positioning */
.dark .fixed[class*="bg-white"],
.dark div[style*="position: fixed"]>div[style*="backgroundColor"] {
  background-color: rgb(31 41 55) !important;
}

/* Search inputs in chat */
.dark input[style*="background"] {
  background-color: rgb(55 65 81) !important;
  color: rgb(229 231 235) !important;
}

/* Conversation list items */
.dark .hover\:bg-gray-50:hover,
.dark .active\:bg-gray-100:active {
  background-color: rgb(55 65 81) !important;
}

/* Chat messages - sender vs receiver styling */
.dark .bg-gray-100 {
  background-color: rgb(55 65 81) !important;
}

/* Emoji picker */
.dark .p-4.bg-white,
.dark .p-3.bg-white {
  background-color: rgb(31 41 55) !important;
}

/* Dropdown dividers */
.dark .border-t {
  border-color: rgb(55 65 81) !important;
}

/* Active states for buttons */
.dark .active\:bg-gray-200:active {
  background-color: rgb(75 85 99) !important;
}

.dark .active\:bg-gray-300:active {
  background-color: rgb(107 114 128) !important;
}

/* File attachment backgrounds */
.dark .bg-gray-50\/80 {
  background-color: rgb(31 41 55 / 0.8) !important;
}

/* Sidebar header gradient in dark mode */
.dark .border-b.border-gray-100 {
  border-color: rgb(55 65 81) !important;
}

/* Override for elements with explicit white backgrounds in style attribute */
html.dark [style*="white"] {
  --tw-bg-opacity: 1;
}

/* Message bubble styling */
.dark .rounded-2xl.bg-gray-100,
.dark .rounded-xl.bg-gray-100,
.dark .rounded-lg.bg-gray-100 {
  background-color: rgb(55 65 81) !important;
  color: rgb(229 231 235) !important;
}

/* Voice player background */
.dark .bg-gray-50.rounded-2xl,
.dark .bg-gray-100.rounded-2xl {
  background-color: rgb(55 65 81) !important;
}

/* Info panels */
.dark .bg-gray-50.p-3,
.dark .bg-gray-50.p-4 {
  background-color: rgb(31 41 55) !important;
}

/* Navigation items in sidebar */
.dark nav .text-gray-600 {
  color: rgb(209 213 219) !important;
}

.dark nav .bg-gray-100 {
  background-color: rgb(55 65 81) !important;
}

/* User avatar placeholder backgrounds */
.dark .bg-gray-200 {
  background-color: rgb(75 85 99) !important;
}

/* Input focus states */
.dark input:focus,
.dark textarea:focus,
.dark select:focus {
  border-color: rgb(96 165 250) !important;
  outline: none;
}

/* Placeholder color fix */
.dark ::placeholder {
  color: rgb(156 163 175) !important;
}

/* Link colors */
.dark a.text-blue-600 {
  color: rgb(96 165 250) !important;
}

.dark a:hover.text-blue-600 {
  color: rgb(147 197 253) !important;
}

/* Selected/Active navigation items */
.dark .bg-blue-50.text-blue-700 {
  background-color: rgb(30 58 138 / 0.3) !important;
  color: rgb(147 197 253) !important;
}

/* Menu label colors */
.dark .text-gray-400.uppercase {
  color: rgb(156 163 175) !important;
}

/* Logout button hover */
.dark .hover\:bg-red-50:hover {
  background-color: rgb(127 29 29 / 0.3) !important;
}

.dark .group-hover\:bg-red-100 {
  background-color: rgb(127 29 29 / 0.5) !important;
}

/* Close button in sidebar */
.dark button.bg-white\/80 {
  background-color: rgb(31 41 55 / 0.8) !important;
}

.dark button.hover\:bg-white:hover {
  background-color: rgb(55 65 81) !important;
}

/* ==================== Page & Card Gradient Backgrounds for Dark Mode ==================== */

/* Page gradient backgrounds (from-slate-50 via-blue-50 to-indigo-50) */
.dark [class*="bg-gradient-to-br"][class*="from-slate-50"],
.dark .from-slate-50,
.dark .min-h-screen.bg-gradient-to-br {
  background: linear-gradient(to bottom right, rgb(17 24 39), rgb(30 41 59), rgb(30 27 75 / 0.5)) !important;
}

/* Card rounded backgrounds */
.dark .bg-white.rounded-2xl,
.dark .bg-white.rounded-xl,
.dark .bg-white.rounded-lg {
  background-color: rgb(31 41 55) !important;
}

/* Card with shadows */
.dark .shadow-sm.border.bg-white,
.dark .shadow-lg.border.bg-white,
.dark .shadow-xl.border.bg-white,
.dark .rounded-2xl.shadow-lg,
.dark .rounded-xl.shadow-lg,
.dark .rounded-2xl.shadow-sm,
.dark .rounded-xl.shadow-sm {
  background-color: rgb(31 41 55) !important;
}

/* Specific card overrides */
.dark div.bg-white[class*="rounded"][class*="border"],
.dark div.bg-white[class*="rounded"][class*="shadow"] {
  background-color: rgb(31 41 55) !important;
  border-color: rgb(55 65 81) !important;
}

/* Tab panel backgrounds */
.dark .p-2.bg-white.rounded-2xl,
.dark .bg-white.rounded-2xl.shadow-xl {
  background-color: rgb(31 41 55) !important;
}

/* Colored backgrounds for cards */
.dark .bg-amber-50 {
  background-color: rgb(120 53 15 / 0.3) !important;
}

.dark .bg-cyan-50 {
  background-color: rgb(8 51 68 / 0.3) !important;
}

.dark .bg-teal-50 {
  background-color: rgb(13 47 47 / 0.3) !important;
}

.dark .bg-violet-50 {
  background-color: rgb(46 16 101 / 0.3) !important;
}

.dark .bg-rose-50 {
  background-color: rgb(76 5 25 / 0.3) !important;
}

.dark .bg-pink-50 {
  background-color: rgb(77 10 49 / 0.3) !important;
}

/* Text colors for badges and labels */
.dark .text-cyan-600 {
  color: rgb(34 211 238) !important;
}

.dark .text-amber-600 {
  color: rgb(251 191 36) !important;
}

.dark .text-violet-600 {
  color: rgb(167 139 250) !important;
}

.dark .text-pink-600 {
  color: rgb(236 72 153) !important;
}

.dark .text-teal-600 {
  color: rgb(45 212 191) !important;
}

.dark .text-indigo-600 {
  color: rgb(129 140 248) !important;
}

/* Border colors for colored cards */
.dark .border-cyan-100,
.dark .border-amber-100,
.dark .border-violet-100,
.dark .border-pink-100,
.dark .border-teal-100,
.dark .border-indigo-100 {
  border-color: rgb(55 65 81) !important;
}

/* Gradient cards in admin */
.dark [class*="bg-gradient-to-br"][class*="from-cyan-50"],
.dark [class*="bg-gradient-to-br"][class*="from-amber-50"],
.dark [class*="bg-gradient-to-br"][class*="from-violet-50"],
.dark [class*="bg-gradient-to-br"][class*="from-pink-50"],
.dark [class*="bg-gradient-to-br"][class*="from-teal-50"],
.dark [class*="bg-gradient-to-br"][class*="from-indigo-50"] {
  background: rgb(31 41 55) !important;
}

/* Hover states for cards */
.dark .hover\:bg-blue-100:hover {
  background-color: rgb(30 58 138 / 0.4) !important;
}

.dark .hover\:bg-purple-100:hover {
  background-color: rgb(88 28 135 / 0.4) !important;
}

.dark .hover\:bg-indigo-100:hover {
  background-color: rgb(49 46 129 / 0.4) !important;
}

/* Shadow colors for dark mode */
.dark .shadow-gray-200\/50,
.dark .shadow-gray-100 {
  --tw-shadow-color: rgb(0 0 0 / 0.3);
}

/* User avatar and icons backgrounds */
.dark .bg-purple-600 {
  background-color: rgb(147 51 234) !important;
}

.dark .bg-violet-600 {
  background-color: rgb(124 58 237) !important;
}

.dark .bg-indigo-600 {
  background-color: rgb(99 102 241) !important;
}

.dark .bg-cyan-600 {
  background-color: rgb(8 145 178) !important;
}

/* Sub-projects section in sidebar */
.dark .bg-cyan-100 {
  background-color: rgb(8 51 68 / 0.5) !important;
}

/* Badge colors for implementers, cooperators */
.dark .bg-amber-100 {
  background-color: rgb(120 53 15 / 0.5) !important;
}

.dark .text-amber-700 {
  color: rgb(251 191 36) !important;
}

/* Main content area gradient */
.dark main.flex-1 {
  background: linear-gradient(to bottom right, rgb(17 24 39), rgb(30 41 59)) !important;
}

/* Fixed main layout */
.dark .flex.flex-1.overflow-hidden {
  background-color: rgb(17 24 39) !important;
}

/* ==================== User Projects Page Dark Mode ==================== */

/* Project cards */
.dark .bg-white.rounded-2xl.border.shadow-lg,
.dark .bg-white.rounded-2xl.border.shadow-xl,
.dark [class*="bg-white"][class*="rounded-2xl"][class*="border"] {
  background-color: rgb(31 41 55) !important;
  border-color: rgb(55 65 81) !important;
}

/* Sub-project expand area */
.dark .bg-gray-50\/50,
.dark [class*="bg-gray-50"][class*="/50"] {
  background-color: rgb(17 24 39 / 0.5) !important;
}

/* Sub-project cards */
.dark .bg-white.rounded-xl.border {
  background-color: rgb(31 41 55) !important;
  border-color: rgb(55 65 81) !important;
}

/* Gradient button hover area */
.dark [class*="bg-gradient-to-r"][class*="from-gray-50"] {
  background: linear-gradient(to right, rgb(31 41 55), rgb(31 41 55 / 0.5)) !important;
}

.dark [class*="hover\\:from-gray-100"]:hover {
  background: linear-gradient(to right, rgb(55 65 81), rgb(31 41 55)) !important;
}

/* Orange backgrounds for hover */
.dark .hover\:bg-orange-50:hover {
  background-color: rgb(124 45 18 / 0.3) !important;
}

.dark .hover\:border-orange-200:hover {
  border-color: rgb(124 45 18 / 0.5) !important;
}

/* Text colors */
.dark .text-gray-800 {
  color: rgb(229 231 235) !important;
}

.dark .group-hover\:text-orange-600 {
  color: rgb(251 146 60) !important;
}

/* Shadow overrides for colored shadows */
.dark .shadow-gray-200\/50 {
  --tw-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.3), 0 4px 6px -4px rgb(0 0 0 / 0.3);
  --tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);
  box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);
}

.dark .shadow-blue-500\/30 {
  --tw-shadow-color: rgb(59 130 246 / 0.2);
}

/* Orange section backgrounds */
.dark .bg-orange-100 {
  background-color: rgb(124 45 18 / 0.4) !important;
}

.dark .text-orange-600 {
  color: rgb(251 146 60) !important;
}

/* Progress bar backgrounds */
.dark .bg-gray-100.rounded-full {
  background-color: rgb(55 65 81) !important;
}

/* Search bar styling */
.dark .shadow-2xl.border.bg-white {
  background-color: rgb(31 41 55) !important;
  border-color: rgb(55 65 81) !important;
}

/* Header card with shadow */
.dark .bg-white.rounded-2xl.shadow-xl {
  background-color: rgb(31 41 55) !important;
}

/* No results empty state */
.dark .col-span-full.bg-white {
  background-color: rgb(31 41 55) !important;
}

/* Link hover in dropdown */
.dark .hover\:bg-blue-50.cursor-pointer:hover {
  background-color: rgb(30 58 138 / 0.3) !important;
}

/* Pagination buttons */
.dark .border.border-gray-200.hover\:bg-gray-100:hover {
  background-color: rgb(55 65 81) !important;
}

/* Scroll content area */
.dark .overflow-y-auto.bg-gray-50 {
  background-color: rgb(17 24 39) !important;
}

/* Additional text color fixes */
.dark .text-gray-700 {
  color: rgb(209 213 219) !important;
}

/* Border fixes for cards */
.dark .border-gray-100 {
  border-color: rgb(55 65 81) !important;
}

/* Search dropdown z-50 */
.dark .z-50.bg-white {
  background-color: rgb(31 41 55) !important;
}

/* Tab buttons in admin */
.dark .bg-gray-100.text-gray-600 {
  background-color: rgb(55 65 81) !important;
  color: rgb(209 213 219) !important;
}

/* Empty state backgrounds */
.dark .bg-gray-100.rounded-full {
  background-color: rgb(55 65 81) !important;
}

/* ==================== LIGHT MODE EXPLICIT OVERRIDES ==================== */
/* Ensure light mode styles are not overridden when dark class is absent */
html:not(.dark) body {
  background-color: rgb(249 250 251) !important;
  /* gray-50 */
  color: rgb(17 24 39) !important;
  /* gray-900 */
}

html:not(.dark) .bg-white {
  background-color: white !important;
}

html:not(.dark) .bg-gray-50 {
  background-color: rgb(249 250 251) !important;
}

html:not(.dark) .bg-gray-100 {
  background-color: rgb(243 244 246) !important;
}

html:not(.dark) .text-gray-900 {
  color: rgb(17 24 39) !important;
}

html:not(.dark) .text-gray-800 {
  color: rgb(31 41 55) !important;
}

html:not(.dark) .text-gray-700 {
  color: rgb(55 65 81) !important;
}

html:not(.dark) .text-gray-600 {
  color: rgb(75 85 99) !important;
}

html:not(.dark) .text-gray-500 {
  color: rgb(107 114 128) !important;
}

html:not(.dark) .border-gray-200 {
  border-color: rgb(229 231 235) !important;
}

html:not(.dark) .border-gray-100 {
  border-color: rgb(243 244 246) !important;
}

/* Light mode card backgrounds */
html:not(.dark) .bg-white.rounded-2xl,
html:not(.dark) .bg-white.rounded-xl,
html:not(.dark) .bg-white.rounded-lg {
  background-color: white !important;
}

/* Light mode inputs */
html:not(.dark) input,
html:not(.dark) textarea,
html:not(.dark) select {
  background-color: white !important;
  color: rgb(17 24 39) !important;
  border-color: rgb(229 231 235) !important;
}

html:not(.dark) input::placeholder,
html:not(.dark) textarea::placeholder {
  color: rgb(156 163 175) !important;
}

/* Light mode for gradient backgrounds */
html:not(.dark) [class*="bg-gradient-to-br"][class*="from-slate-50"] {
  background: linear-gradient(to bottom right, rgb(248 250 252), rgb(239 246 255), rgb(238 242 255)) !important;
}

/* ==================== FIXED HEADER SUPPORT ==================== */
/* Ensure header is always visible and fixed */
header {
  position: sticky;
  top: 0;
  z-index: 50;
  flex-shrink: 0;
}

/* Support for ultra-wide and tall screens (19.5:9 ratio like 2868x1320) */
@media screen and (min-aspect-ratio: 19/9) {
  .h-screen {
    height: 100vh !important;
    max-height: 100vh !important;
  }

  main.overflow-auto {
    height: calc(100vh - 64px) !important;
    max-height: calc(100vh - 64px) !important;
  }
}

/* Support for very tall screens */
@media screen and (max-aspect-ratio: 9/16) {
  .h-screen {
    height: 100dvh !important;
    max-height: 100dvh !important;
  }
}

/* Mobile safe area support for notched devices */
@supports (padding-top: env(safe-area-inset-top)) {
  header {
    padding-top: env(safe-area-inset-top, 0px);
    box-sizing: border-box;
  }

  .pwa-safe-bottom {
    padding-bottom: 0 !important;
  }

  .pb-safe {
    padding-bottom: 0 !important;
  }
}

/* Ensure body doesn't overflow */
body {
  overflow: hidden;
  height: 100vh;
  height: 100dvh;
}

/* ==================== MOBILE LIGHT MODE FIX ==================== */
/* Ensure mobile devices in light mode display correctly */
/* This uses the explicit html:not(.dark) selector to ensure light mode styles take precedence */

@media (max-width: 768px) {

  /* Force light mode background on mobile when not dark */
  html:not(.dark) body,
  html:not(.dark) #root {
    background-color: rgb(249 250 251) !important;
    /* gray-50 */
  }

  html:not(.dark) main {
    background-color: transparent !important;
  }

  /* Mobile cards should be white in light mode */
  html:not(.dark) .bg-white {
    background-color: white !important;
  }

  /* Ensure gradients show correctly on mobile light mode */
  html:not(.dark) .bg-gradient-to-b {
    background-color: transparent !important;
  }

  html:not(.dark) .from-blue-50 {
    --tw-gradient-from: #eff6ff !important;
  }

  html:not(.dark) .from-amber-50 {
    --tw-gradient-from: #fffbeb !important;
  }

  html:not(.dark) .from-emerald-50 {
    --tw-gradient-from: #ecfdf5 !important;
  }

  /* Mobile text colors */
  html:not(.dark) .text-gray-900 {
    color: rgb(17 24 39) !important;
  }

  html:not(.dark) .text-gray-700 {
    color: rgb(55 65 81) !important;
  }

  html:not(.dark) .text-gray-500 {
    color: rgb(107 114 128) !important;
  }

  /* Mobile border colors */
  html:not(.dark) .border-gray-200 {
    border-color: rgb(229 231 235) !important;
  }

  html:not(.dark) .border-gray-100 {
    border-color: rgb(243 244 246) !important;
  }
}

@layer base {

  /* Root styling */
  html {
    height: 100%;
    width: 100%;
    /* Enable smooth scrolling */
    scroll-behavior: smooth;
    /* Prevent iOS Safari from auto-zooming */
    -webkit-text-size-adjust: 100%;
  }

  body {
    @apply bg-gray-50 text-gray-900;
    min-height: 100vh;
    min-height: -webkit-fill-available;
    min-height: 100dvh;
    /* Dynamic viewport height for mobile */
    width: 100%;
    margin: 0;
    padding: 0;
    overflow-x: hidden;
    /* Prevent pull-to-refresh in PWA */
    overscroll-behavior-y: contain;
  }

  /* Prevent zoom on input focus (iOS Safari & PWA) */
  input,
  textarea,
  select {
    font-size: 16px !important;
    max-height: 999px;
    /* Prevent iOS Safari weird autofill behavior */
    -webkit-appearance: none;
    appearance: none;
    border-radius: 0;
  }

  /* ==================== Animation Performance Optimizations ==================== */

  /* GPU acceleration for animated elements */
  [class*="motion"],
  .animate-fadeIn,
  .animate-slideUp,
  .animate-scaleIn,
  .slide-up,
  .slide-down,
  .fade-in {
    will-change: transform, opacity;
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
  }

  /* Respect user preference for reduced motion */
  @media (prefers-reduced-motion: reduce) {

    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }

    /* Framer Motion specific - disable all transforms */
    [class*="motion"] {
      transform: none !important;
      animation: none !important;
      transition: none !important;
    }
  }

  /* Optimize animations on mobile for battery and performance */
  @media (max-width: 768px) {

    /* Reduce animation complexity on mobile */
    .animate-bounce,
    .animate-pulse {
      animation-duration: 1.5s;
    }

    /* Disable expensive blur effects on low-end devices */
    @media (prefers-reduced-motion: no-preference) {

      .backdrop-blur-sm,
      .backdrop-blur-md,
      .backdrop-blur-lg {
        backdrop-filter: blur(4px);
        -webkit-backdrop-filter: blur(4px);
      }
    }
  }

  /* PWA Standalone Mode - Apply safe areas */
  @media (display-mode: standalone) {
    body {
      padding-top: 0;
      padding-bottom: 0;
      padding-left: env(safe-area-inset-left, 0px);
      padding-right: env(safe-area-inset-right, 0px);
      /* Ensure no gray gap at bottom */
      min-height: 100dvh;
    }

    /* Root container in standalone mode */
    #root {
      min-height: 100dvh;
      height: 100dvh;
      overflow: hidden;
    }
  }

  /* iOS Safari standalone mode detection */
  @supports (-webkit-touch-callout: none) {
    @media (display-mode: standalone) {

      /* Safe area is already handled by the @supports(padding-top: env(safe-area-inset-top)) rule above */
      /* Full screen modals should respect safe area */
      .fixed.inset-0.z-50,
      .fixed.inset-0.z-\[50\] {
        padding-top: env(safe-area-inset-top, 0px);
      }
    }
  }
}

@layer utilities {

  /* PWA Standalone Mode utilities */
  .pwa-safe-top {
    padding-top: 0;
  }

  @media (display-mode: standalone) {
    .pwa-safe-top {
      padding-top: env(safe-area-inset-top, 0px);
    }
  }

  .pwa-safe-bottom {
    padding-bottom: 0;
  }

  @media (display-mode: standalone) {
    .pwa-safe-bottom {
      padding-bottom: 0 !important;
    }
  }

  /* Mobile-first utilities */
  .safe-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-bottom {
    padding-bottom: 0 !important;
  }

  .safe-left {
    padding-left: env(safe-area-inset-left);
  }

  .safe-right {
    padding-right: env(safe-area-inset-right);
  }

  .safe-area-top {
    padding-top: env(safe-area-inset-top, 0px);
  }

  .safe-area-bottom {
    padding-bottom: 0 !important;
  }

  /* Touch-friendly tap targets */
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }

  /* Prevent text selection on mobile */
  .no-select {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }

  /* Smooth momentum scrolling */
  .scroll-smooth {
    -webkit-overflow-scrolling: touch;
  }

  /* Chat animations */
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fadeIn {
    animation: fadeIn 0.3s ease-out;
  }

  /* Hide scrollbar but keep functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Mobile bottom navigation safe area */
  .pb-safe {
    padding-bottom: 0 !important;
  }

  /* Backdrop blur support check */
  @supports (backdrop-filter: blur(10px)) {
    .backdrop-blur-safe {
      backdrop-filter: blur(10px);
    }
  }

  /* Animation for mobile */
  .slide-up {
    animation: slideUp 0.3s ease-out;
  }

  .slide-down {
    animation: slideDown 0.3s ease-out;
  }

  .fade-in {
    animation: fadeIn 0.2s ease-out;
  }

  @keyframes slideUp {
    from {
      transform: translateY(100%);
      opacity: 0;
    }

    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  @keyframes slideDown {
    from {
      transform: translateY(-100%);
      opacity: 0;
    }

    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
    }

    to {
      opacity: 1;
    }
  }

  /* Safe area bottom for input fields on mobile - disabled for edge-to-edge */
  .safe-area-bottom {
    padding-bottom: 0 !important;
  }

  /* Touch manipulation for better mobile performance */
  .touch-manipulation {
    touch-action: manipulation;
  }

  /* Prevent iOS zoom on input focus */
  input,
  textarea,
  select {
    font-size: 16px !important;
  }

  /* Mobile-specific scrolling improvements */
  .overflow-y-auto {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior-y: contain;
  }

  /* Improve button feedback on mobile */
  button,
  [role="button"] {
    -webkit-tap-highlight-color: transparent;
  }

  /* Loading spinner */
  .spinner {
    animation: spin 1s linear infinite;
  }

  @keyframes spin {
    from {
      transform: rotate(0deg);
    }

    to {
      transform: rotate(360deg);
    }
  }

  /* Scale in animation for modals */
  @keyframes scaleIn {
    from {
      opacity: 0;
      transform: scale(0.95);
    }

    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  .animate-scaleIn {
    animation: scaleIn 0.2s ease-out;
  }

  /* Slide up animation for mobile elements */
  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-slideUp {
    animation: slideUp 0.2s ease-out;
  }

  /* Slide down animation */
  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-slideDown {
    animation: slideDown 0.15s ease-out;
  }

  /* Hide sidebar when OnlyOffice viewer is open */
  body.onlyoffice-viewer-open aside {
    display: none !important;
  }

  body.onlyoffice-viewer-open .lg\:ml-64 {
    margin-left: 0 !important;
  }

  /* Slide in from right */
  @keyframes slideInRight {
    from {
      opacity: 0;
      transform: translateX(20px);
    }

    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  .animate-slideInRight {
    animation: slideInRight 0.3s ease-out;
  }

  /* Fade in up animation for slogan */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(10px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fadeInUp {
    animation: fadeInUp 0.8s ease-out 0.2s both;
  }

  /* Gradient shift animation for text */
  @keyframes gradientShift {

    0%,
    100% {
      background-position: 0% 50%;
    }

    50% {
      background-position: 100% 50%;
    }
  }

  .animate-gradientShift {
    animation: gradientShift 3s ease-in-out infinite;
  }

  /* Animation delay utilities */
  .animation-delay-200 {
    animation-delay: 0.2s;
  }
}